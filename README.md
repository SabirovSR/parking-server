# üöó Smart Parking Management System
## üåü –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω–æ–π –ø–∞—Ä–∫–æ–≤–∫–æ–π
#### FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∫–æ–≤–∫–∏.

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–º–∏ –º–µ—Å—Ç–∞–º–∏ (16 –º–µ—Å—Ç –¥–≤—É—Ö —Ç–∏–ø–æ–≤)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ä–µ–∑–¥–∞/–≤—ã–µ–∑–¥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∫–æ–≤–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Ö–æ–¥–æ–≤
- WebSocket –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- FastAPI - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- WebSocket - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- MongoDB - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∏ –¢–°
- Pydantic - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- CORS - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞—Ä–∫–æ–≤–∫–∏
- 18 –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç:
    - 2 –º–µ—Å—Ç–∞ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–µ–π ‚ö°
    - 14 –æ–±—ã—á–Ω—ã—Ö –º–µ—Å—Ç–∞ üöó

## üì° API Endpoints
### üöò –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏
- `POST /api/vehicle/arrive` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ
- `POST /api/vehicle/depart/{vehicle_id}` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–µ–∑–¥–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `GET /api/parking/status` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–∞—Ä–∫–æ–≤–∫–∏
- `GET /api/vehicles` - —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¢–°
- `GET /api/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞ 1 –¥–µ–Ω—å)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

- –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: 
    ```bash
    git clone https://github.com/SabirovSR/parking-server.git
    cd parking-server
    ```

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    pip install -r app/requirements.txt
    ```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
    ```
    MONGODB_URI=–≤–∞—à–µ_–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ_–∫_–±–∞–∑–µ
    ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Å:
    ```
    uvicorn main:app --reload
    ```

### üê≥ Docker-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –°–µ—Ä–≤–∏—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º –ø–∞—Ä–∫–æ–≤–∫–∏
    - –°–¥–µ–ª–∞–Ω volum, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å 
    ```
    volumes:
      - mongodb_data:/data/db
    ```

2. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:
    ```bash
    docker-compose build
    ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
    ```bash
    docker-compose up -d
    ```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç: 16
- –ú–µ—Å—Ç–∞ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–µ–π: 14 –∏ 15

## üí∞ –¢–∞—Ä–∏—Ñ—ã
| –¢–∏–ø –¢–°        | –¢–∞—Ä–∏—Ñ (—Ä—É–±/–º–∏–Ω) |
|---------------|-----------------|
| –ê–≤—Ç–æ–º–æ–±–∏–ª—å    | 1.5             |
| –≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—å | 2.5             |

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–µ–∑–¥–∞
```http
POST /api/vehicle/arrive
```
–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–±—ã—Ç–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫—É.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "vehicle_id": "string",
    "spot_id": "integer",
    "isEv": "boolean",
    "type": "string"
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**
- 200: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- 400: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–º–µ—Å—Ç–æ –∑–∞–Ω—è—Ç–æ, –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –º–µ—Å—Ç–∞ –∏ —Ç.–¥.)

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–µ–∑–¥–∞
```http
POST /api/vehicle/depart/{vehicle_id}
```
–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã–µ–∑–¥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `vehicle_id`: ID —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:**
- 200: –£—Å–ø–µ—à–Ω—ã–π –≤—ã–µ–∑–¥
```json
{
    "status": "success",
    "cost": "number",
    "duration_minutes": "number"
}
```
- 404: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- 400: –£–∂–µ –æ–ø–ª–∞—á–µ–Ω–æ

### –°—Ç–∞—Ç—É—Å –ø–∞—Ä–∫–æ–≤–∫–∏
```http
GET /api/parking/status
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç.

### –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
```http
GET /api/vehicles
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫–µ.

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–∞—à–∏–Ω
```http
GET /api/stats/vehicles
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–∞—à–∏–Ω –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `time_range`: –î–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏ ("1m", "10m", "1h", "1d")
- `interval`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ("10s", "1m", "5m", "15m", "1h")

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—ã—Ä—É—á–∫–µ
```http
GET /api/stats/revenue
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—ã—Ä—É—á–∫–µ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `time_range`: –î–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏ ("1m", "10m", "1h", "1d")
- `interval`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ("10s", "1m", "5m", "15m", "1h")

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–æ—è–Ω–∫–∏
```http
GET /api/stats/duration
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–æ—è–Ω–∫–∏ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `time_range`: –î–∏–∞–ø–∞–∑–æ–Ω –≤—Ä–µ–º–µ–Ω–∏ ("1m", "10m", "1h", "1d")
- `interval`: –ò–Ω—Ç–µ—Ä–≤–∞–ª –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ("10s", "1m", "5m", "15m", "1h")

### –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞
```http
GET /api/stats/total-revenue
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â—É—é –≤—ã—Ä—É—á–∫—É –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è.

### –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```http
POST /api/reset
```
–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–µ–∑–¥–∞ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—è
```bash
curl -X POST "http://localhost:8008/api/vehicle/arrive" \
     -H "Content-Type: application/json" \
     -d '{"vehicle_id": "EV123", "spot_id": 14, "isEv": true, "type": "evCar"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—ã—Ä—É—á–∫–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
```bash
curl "http://localhost:8008/api/stats/revenue?time_range=1h&interval=5m"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–∞—à–∏–Ω –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç
```bash
curl "http://localhost:8008/api/stats/vehicles?time_range=10m&interval=1m"
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ –º–æ–≥—É—Ç –ø–∞—Ä–∫–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –º–µ—Å—Ç–∞—Ö 14 –∏ 15
2. –û–±—ã—á–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ø–∞—Ä–∫–æ–≤–∞—Ç—å—Å—è –Ω–∞ –º–µ—Å—Ç–∞—Ö –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–µ–π
3. –û–¥–Ω–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –æ—Ç 10 —Å–µ–∫—É–Ω–¥ –¥–æ 1 —á–∞—Å–∞
5. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: 1 –º–∏–Ω—É—Ç–∞, 10 –º–∏–Ω—É—Ç, 1 —á–∞—Å, 1 –¥–µ–Ω—å

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.
